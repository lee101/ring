<link rel="import" href="/bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="/bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="/bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="/bower_components/core-icons/core-icons.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="/bower_components/core-menu/core-menu.html">
<link rel="import" href="/bower_components/core-menu/core-submenu.html">
<link rel="import" href="/bower_components/core-item/core-item.html">

<link rel="import" href="/bower_components/core-tooltip/core-tooltip.html">

<link rel="import" href="/bower_components/font-roboto/roboto.html">

<!-- Add your elements here -->
<polymer-element name="ring-submenu" extends="core-submenu">
    <template>
        <link rel="stylesheet" href="/bower_components/core-menu/core-submenu.css">

        <core-item id="submenuItem" src="{{src}}" label="{{label}}" icon="{{icon}}"
                   class="{{ {'core-selected' : selected} | tokenList}}" on-tap="{{activate}}">
            <content select=".item-content"></content>
        </core-item>

        <core-menu id="submenu" selected="{{selected}}" selectedItem="{{selectedItem}}"
                   selectedAttribute="{{selectedAttribute}}" valueattr="{{valueattr}}">
            <content></content>
        </core-menu>

        <core-collapse target="{{$.submenu}}" opened="{{opened}}"></core-collapse>

    </template>
    <script>
        Polymer({
            activate: function () {
                if (this.hasItems() && this.active) {
                    this.toggle();
//                    this.unselectAllItems();
//                    this.unselectedFunc()
                }
            },
            unselectedFunc: function () {
            },
            activeChanged: function () {
                if (!this.active) {
                    this.unselectAllItems();
                }
            },
            selected: function () {
                return this.$.submenu.selected;
            }
        });
    </script>
</polymer-element>
